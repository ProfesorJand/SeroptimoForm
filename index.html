<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Seroptimo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const grafico = {total:null, fisica:null, ambiente:null, mental:null, emocional:null};
      function enviar(e){
        e.preventDefault();    
        let v = {total:0, fisica:0, ambiente:0, mental:0,emocional:0};
        let p = {total:0, fisica:0, ambiente:0, mental:0,emocional:0};
        let k = {total:0, fisica:0, ambiente:0, mental:0,emocional:0};
        const fisica = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
        const ambiente = [16,17,18,19,20,21,22,30];
        const mental = [23,24,25,26,27,28,29];
        const emocional = [31,32,33,34,35];
        for(var i = 1; i <= 35; i++){
          const radio = document.querySelector(`input[name="preg${i}"]:checked`).value;
          if(radio === "v") {
            v.total = v.total + 1;
            v.fisica = v.fisica + (fisica.includes(i) ? 1 : 0);
            v.ambiente = v.ambiente + (ambiente.includes(i) ? 1 : 0);
            v.mental = v.mental + (mental.includes(i) ? 1 : 0);
            v.emocional = v.emocional + (emocional.includes(i) ? 1 : 0);
          };
          if(radio === "p") {
            p.total = p.total + 1;
            p.fisica = p.fisica + (fisica.includes(i) ? 1 : 0);
            p.ambiente = p.ambiente + (ambiente.includes(i) ? 1 : 0);
            p.mental = p.mental + (mental.includes(i) ? 1 : 0);
            p.emocional = p.emocional + (emocional.includes(i) ? 1 : 0);
          };
          if(radio === "k") {
            k.total = k.total + 1;
            k.fisica = k.fisica + (fisica.includes(i) ? 1 : 0);
            k.ambiente = k.ambiente + (ambiente.includes(i) ? 1 : 0);
            k.mental = k.mental + (mental.includes(i) ? 1 : 0);
            k.emocional = k.emocional + (emocional.includes(i) ? 1 : 0);
          };
        }
        console.log(v,p,k);
        alert("Vata: "+ v.total +", Pitta: "+ p.total + ", Kapha: "+ k.total);
        draw({v, p, k});
      }

      
      function draw({v,p,k}) {
        var ctxT = document.getElementById("graficoTotal");
        var ctxF = document.getElementById("graficoFisica");
        var ctxA = document.getElementById("graficoAmbiente");
        var ctxM = document.getElementById("graficoMental");
        var ctxE = document.getElementById("graficoEmocional");
        const dataTotal = [{label:"Total", data: [v.total,p.total,k.total]}];
        const dataFisica = [{label:"Fisica", data: [v.fisica,p.fisica,k.fisica]}];
        const dataAmbiente = [{label:"Ambiente", data: [v.ambiente,p.ambiente,k.ambiente]}];
        const dataMental = [{label:"Mental", data: [v.mental,p.mental,k.mental]}];
        const dataEmocional = [{label:"Emocional", data: [v.emocional,p.emocional,k.emocional]}];
        const data = {
            labels: ['Vata', 'Pitta', 'Kapha'],
            datasets: [{
              label: 'Dosha',
              data: dataTotal,
              borderWidth: 1
            }]
          };
        const suggestedMaxTotal = 35;
        const suggestedMaxFisica = 15;
        const suggestedMaxAmbiente = 8;
        const suggestedMaxMental = 7;
        const suggestedMaxEmocional = 5;
        const options = {
          scales: {
              r: {
                angleLines: {
                  color: 'red'
                },
                suggestedMin: 0,
                suggestedMax: 35
              }
            }
          };
        const animation = {
          duration: 2000,
          onProgress: function(context) {
            if (context.initial) {
              initProgress.value = context.currentStep / context.numSteps;
            } else {
              progress.value = context.currentStep / context.numSteps;
            }
          },
          onComplete: function(context) {
            if (context.initial) {
              console.log('Initial animation finished');
            } else {
              console.log('animation finished');
            }
          }
        };  

        if(grafico.total || grafico.fisica || grafico.ambiente || grafico.mental || grafico.emocional){
          grafico.total.clear();
          grafico.total.destroy();
          grafico.fisica.clear();
          grafico.fisica.destroy();
          grafico.ambiente.clear();
          grafico.ambiente.destroy();
          grafico.mental.clear();
          grafico.mental.destroy();
          grafico.emocional.clear();
          grafico.emocional.destroy();
        }
        
        grafico.total = new Chart(ctxT, {
          type: 'radar',
          data:{...data,datasets: dataTotal},
          options,
          animation
        });
        grafico.fisica = new Chart(ctxF, {
          type: 'radar',
          data:{...data,datasets:dataFisica},
          options:{...options, scales: {r:{suggestedMax:suggestedMaxFisica}}},
          animation
        });
        grafico.ambiente = new Chart(ctxA, {
          type: 'radar',
          data:{...data,datasets: dataAmbiente},
          options:{...options, scales: {r:{suggestedMax:suggestedMaxAmbiente}}},
          animation
        });
        grafico.mental = new Chart(ctxM, {
          type: 'radar',
          data:{...data,datasets: dataMental},
          options:{...options, scales: {r:{suggestedMax:suggestedMaxMental}}},
          animation
        });
        grafico.emocional = new Chart(ctxE, {
          type: 'radar',
          data:{...data,datasets: dataEmocional},
          options:{...options, scales: {r:{suggestedMax:suggestedMaxEmocional}}},
          animation
        });
      }
    </script>
      <style>

        canvas { border: 1px solid black; }

        .ContainerGraficos{
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: auto;
        }
        .BoxGraficosTotales{
          display: flex;
          width: 50%;
          height: auto;
          align-items: center;
          justify-content: center;
        }

        .ContainerGraficosArea{
          display: flex;
          width: 50%;
          flex-direction: row;
          flex-wrap: wrap;
        }
        .BoxGraficosArea{
          display: flex;
          width: 50%;
          height: auto;
          flex:50%;
          align-items: center;
          justify-content: center;
        }
        
      </style>
</head>
<body>
    <form id="form" onsubmit="enviar(event)" action="javascript:void(0);">
        <fieldset>
            <legend>Datos Personales:</legend>
            <label for="nombre">Nombre:</label><br>
            <input type="text" id="nombre" name="nombre" value="VUAAAMO"><br>
            <label for="correo">Correo</label><br>
            <input type="email" id="correo" name="correo" value="example@gmail.com"><br><br>
        </fieldset>
        <fieldset>
            <legend>Area</legend>
            <fieldset>
                <legend>1. Constitución física:</legend>
                  <label>
                    <input type="radio" name="preg1" value="v" checked required />
                    Delgada/Huesuda
                  </label>
                
                  <label>
                    <input type="radio" name="preg1" value="p" />
                    Moderado
                  </label>
                
                  <label>
                    <input type="radio" name="preg1" value="k" />
                    Grande / Robusta / Bien Desarrollada
                  </label>
            </fieldset>
            <fieldset>
                <legend>2. Estatura:</legend>
                  <label>
                    <input type="radio" name="preg2" value="v" checked required />
                    Muy Pequeño / Muy Alto
                  </label>
                
                  <label>
                    <input type="radio" name="preg2" value="p" />
                    Mediana
                  </label>
                
                  <label>
                    <input type="radio" name="preg2" value="k" />
                    Un poco por debajo del promedio
                  </label>
            </fieldset>
            <fieldset>
                <legend>3. Peso:</legend>
                  <label>
                    <input type="radio" name="preg3" value="v" checked required />
                    Dificultad para ganar peso
                  </label>
                
                  <label>
                    <input type="radio" name="preg3" value="p" />
                    Mediano / Puede ganar y perder peso con facilidad
                  </label>
                
                  <label>
                    <input type="radio" name="preg3" value="k" />
                    Generalmente con sobrepeso / Dificultad para perderlo
                  </label>
            </fieldset>
            <fieldset>
                <legend>4. Brillo de la piel:</legend>
                  <label>
                    <input type="radio" name="preg4" value="v" checked required />
                    Opaco / Oscuro
                  </label>
                
                  <label>
                    <input type="radio" name="preg4" value="p" />
                    Rojo y lustroso
                  </label>
                
                  <label>
                    <input type="radio" name="preg4" value="k" />
                    Banco / Pálido
                  </label>
            </fieldset>
            <fieldset>
                <legend>5. Textura de la piel:</legend>
                  <label>
                    <input type="radio" name="preg5" value="v" checked required />
                    Seca / Áspera / Rugosa/ Venas prominentes
                  </label>
                
                  <label>
                    <input type="radio" name="preg5" value="p" />
                    Caliente / Grasosa / Húmeda / Pecas / Acné
                  </label>
                
                  <label>
                    <input type="radio" name="preg5" value="k" />
                    Gruesa / Fría / Bien lubricada
                  </label>
            </fieldset>
            <fieldset>
                <legend>6. Temperatura del cuerpo:</legend>
                  <label>
                    <input type="radio" name="preg6" value="v" checked required />
                    Manos y pies frios
                  </label>
                
                  <label>
                    <input type="radio" name="preg6" value="p" />
                    Caliente
                  </label>
                
                  <label>
                    <input type="radio" name="preg6" value="k" />
                    Un poco frío o normal
                  </label>
            </fieldset>
            <fieldset>
                <legend>7. Pelo:</legend>
                  <label>
                    <input type="radio" name="preg7" value="v" checked required />
                    Seco / Fino / Crespo
                  </label>
                
                  <label>
                    <input type="radio" name="preg7" value="p" />
                    Oleoso / Calvicie prematura / Canas
                  </label>
                
                  <label>
                    <input type="radio" name="preg7" value="k" />
                    Fuerte / Ondulado / Lustroso
                  </label>
            </fieldset>
            <fieldset>
                <legend>8. Frente:</legend>
                  <label>
                    <input type="radio" name="preg8" value="v" checked required />
                    Estrecha / Pequeña
                  </label>
                
                  <label>
                    <input type="radio" name="preg8" value="p" />
                    Moderada / Surcos / Entradas
                  </label>
                
                  <label>
                    <input type="radio" name="preg8" value="k" />
                    Ancha
                  </label>
            </fieldset>
            <fieldset>
              <legend>9. Ojos:</legend>
                <label>
                  <input type="radio" name="preg9" value="v" checked required />
                  Pequeños / Nerviosos
                </label>
              
                <label>
                  <input type="radio" name="preg9" value="p" />
                  Penetrantes / Se irritan fácilmente
                </label>
              
                <label>
                  <input type="radio" name="preg9" value="k" />
                  Grandes / Atractivos / Pestañas grande
                </label>
          </fieldset>
          <fieldset>
            <legend>10. Dientes:</legend>
              <label>
                <input type="radio" name="preg10" value="v" checked required />
                Irregulares / Pequeños / Mal formados
              </label>
            
              <label>
                <input type="radio" name="preg10" value="p" />
                Regulares / Encías sangran con facilidad
              </label>
            
              <label>
                <input type="radio" name="preg10" value="k" />
                Grandes / Bien formados
              </label>
          </fieldset>
          <fieldset>
            <legend>11. Lengua:</legend>
              <label>
                <input type="radio" name="preg11" value="v" checked required />
                Áspera
              </label>
            
              <label>
                <input type="radio" name="preg11" value="p" />
                Suave / Rosada
              </label>
            
              <label>
                <input type="radio" name="preg11" value="k" />
                Gruesa
              </label>
          </fieldset>
          <fieldset>
            <legend>12. Cara:</legend>
              <label>
                <input type="radio" name="preg12" value="v" checked required />
                Pequeña / Arrugada / Seca
              </label>
            
              <label>
                <input type="radio" name="preg12" value="p" />
                Delicada / Rojiza / Perfil agudo
              </label>
            
              <label>
                <input type="radio" name="preg12" value="k" />
                Gruesa / Agradable / Perfil suave
              </label>
          </fieldset>
          <fieldset>
            <legend>13. Tórax / Pecho:</legend>
              <label>
                <input type="radio" name="preg13" value="v" checked required />
                Estrecho / Pequeño
              </label>
            
              <label>
                <input type="radio" name="preg13" value="p" />
                Moderadamente desarrollado
              </label>
            
              <label>
                <input type="radio" name="preg13" value="k" />
                Ancho / Bien desarrollado
              </label>
          </fieldset>
          <fieldset>
            <legend>14. Huesos:</legend>
              <label>
                <input type="radio" name="preg14" value="v" checked required />
                Delgados / Articulaciones crujientes
              </label>
            
              <label>
                <input type="radio" name="preg14" value="p" />
                Medianos / Articulaciones flojas
              </label>
            
              <label>
                <input type="radio" name="preg14" value="k" />
                Gruesos / Articulaciones fuertes
              </label>
          </fieldset>
          <fieldset>
            <legend>15. Uñas:</legend>
              <label>
                <input type="radio" name="preg15" value="v" checked required />
                Quebradiza / Ásperas
              </label>
            
              <label>
                <input type="radio" name="preg15" value="p" />
                Suaves / Rosadas
              </label>
            
              <label>
                <input type="radio" name="preg15" value="k" />
                Anchas
              </label>
          </fieldset>
          <fieldset>
            <legend>16. Sueño:</legend>
              <label>
                <input type="radio" name="preg16" value="v" checked required />
                Ligero con interrupciones
              </label>
            
              <label>
                <input type="radio" name="preg16" value="p" />
                Variable
              </label>
            
              <label>
                <input type="radio" name="preg16" value="k" />
                Profundo / Excesivo
              </label>
          </fieldset>
          <fieldset>
            <legend>17. Le disgusta:</legend>
              <label>
                <input type="radio" name="preg17" value="v" checked required />
                El frío / La sequedad
              </label>
            
              <label>
                <input type="radio" name="preg17" value="p" />
                Sustancias y atmósfera caliente
              </label>
            
              <label>
                <input type="radio" name="preg17" value="k" />
                Sustancias frías y aceitosas / Atmósfera húmeda
              </label>
          </fieldset>
          <fieldset>
            <legend>18. Apetito:</legend>
              <label>
                <input type="radio" name="preg18" value="v" checked required />
                Variable / Nervioso
              </label>
            
              <label>
                <input type="radio" name="preg18" value="p" />
                Grande / Irritable si debe saltar la comida
              </label>
              
              <label>
                <input type="radio" name="preg18" value="k" />
                Moderado pero constante
              </label>
          </fieldset>
          <fieldset>
            <legend>19. Sed:</legend>
              <label>
                <input type="radio" name="preg19" value="v" checked required />
                Escasa
              </label>
            
              <label>
                <input type="radio" name="preg19" value="p" />
                Generalmente sediente
              </label>
              
              <label>
                <input type="radio" name="preg19" value="k" />
                Moderada
              </label>
          </fieldset>
          <fieldset>
            <legend>20. Estado instestinal:</legend>
              <label>
                <input type="radio" name="preg20" value="v" checked required />
                Heces duras / Secas / Constipación
              </label>
            
              <label>
                <input type="radio" name="preg20" value="p" />
                Heces suave / Sueltas / Tendencia a diarrea
              </label>
              
              <label>
                <input type="radio" name="preg20" value="k" />
                Regular / Heces normales
              </label>
          </fieldset>
          <fieldset>
            <legend>21. Orina:</legend>
              <label>
                <input type="radio" name="preg21" value="v" checked required />
                Escasa
              </label>
            
              <label>
                <input type="radio" name="preg21" value="p" />
                Abundante / Amarilla intensa
              </label>
              
              <label>
                <input type="radio" name="preg21" value="k" />
                Escasa
              </label>
          </fieldset>
          <fieldset>
            <legend>22. Sudoración:</legend>
              <label>
                <input type="radio" name="preg22" value="v" checked required />
                Escasa sin olor
              </label>
            
              <label>
                <input type="radio" name="preg22" value="p" />
                Mucha / Olor intenso
              </label>
              
              <label>
                <input type="radio" name="preg22" value="k" />
                Moderada
              </label>
          </fieldset>
          <fieldset>
            <legend>23. Memoria:</legend>
              <label>
                <input type="radio" name="preg23" value="v" checked required />
                Rápida / Tendencia a olvidar
              </label>
            
              <label>
                <input type="radio" name="preg23" value="p" />
                Aguda / Clara
              </label>
              
              <label>
                <input type="radio" name="preg23" value="k" />
                Lenta pero constante
              </label>
          </fieldset>
          <fieldset>
            <legend>24. Comprensión:</legend>
              <label>
                <input type="radio" name="preg24" value="v" checked required />
                Espontánea / Rápida
              </label>
            
              <label>
                <input type="radio" name="preg24" value="p" />
                Promedio
              </label>
              
              <label>
                <input type="radio" name="preg24" value="k" />
                Requiere tiempo para comprender
              </label>
          </fieldset>
          <fieldset>
            <legend>25. Relación al estrés:</legend>
              <label>
                <input type="radio" name="preg25" value="v" checked required />
                Miedo / Ansiedad bajo estrés
              </label>
            
              <label>
                <input type="radio" name="preg25" value="p" />
                Frustración / Irritabilidad / Enojo bajo estrés
              </label>
              
              <label>
                <input type="radio" name="preg25" value="k" />
                Maneja bien el estrés
              </label>
          </fieldset>
          <fieldset>
            <legend>26. Resistencia a enfermedades:</legend>
              <label>
                <input type="radio" name="preg26" value="v" checked required />
                Pobre / Sistema inmune variable
              </label>
            
              <label>
                <input type="radio" name="preg26" value="p" />
                Mediana / Tendencia a infecciones
              </label>
              
              <label>
                <input type="radio" name="preg26" value="k" />
                Buena / Consistente / Sistema inmune fuerte
              </label>
          </fieldset>
          <fieldset>
            <legend>27. Enfermedades frecuentes:</legend>
              <label>
                <input type="radio" name="preg27" value="v" checked required />
                Alteraciones nerviosas y mentales / Dolores neurálgicos (nervios) y articulaciones
              </label>
            
              <label>
                <input type="radio" name="preg27" value="p" />
                Infecciones / Inflamaciones / Trastornos sanguíneos
              </label>
              
              <label>
                <input type="radio" name="preg27" value="k" />
                Respiratorias / Edema / Mucosidades / Inflamación articular
              </label>
          </fieldset>
          <fieldset>
            <legend>28. Sexualidad:</legend>
              <label>
                <input type="radio" name="preg28" value="v" checked required />
                Interés sexual variable / Fantasía sexual activa
              </label>
            
              <label>
                <input type="radio" name="preg28" value="p" />
                Interés e impulso sexual alto
              </label>
              
              <label>
                <input type="radio" name="preg28" value="k" />
                Interés e impuso sexual constante
              </label>
          </fieldset>
          <fieldset>
            <legend>29. Estado de animo:</legend>
              <label>
                <input type="radio" name="preg29" value="v" checked required />
                Ideas y estado de animo cambiante
              </label>
            
              <label>
                <input type="radio" name="preg29" value="p" />
                Intenso al expresar ideas y sentimientos
              </label>
              
              <label>
                <input type="radio" name="preg29" value="k" />
                Estable confiado / Lento para cambiar de idea
              </label>
          </fieldset>
          <fieldset>
            <legend>30. Preferencias climáticas:</legend>
              <label>
                <input type="radio" name="preg30" value="v" checked required />
                Climas calientes / Sol / Humedad
              </label>
            
              <label>
                <input type="radio" name="preg30" value="p" />
                Climas fríos / Bien ventilados
              </label>
              
              <label>
                <input type="radio" name="preg30" value="k" />
                Cualquier clima siempre que no sea húmedo
              </label>
          </fieldset>
          <fieldset>
            <legend>31. Actividad:</legend>
              <label>
                <input type="radio" name="preg31" value="v" checked required />
                Inquieto
              </label>
            
              <label>
                <input type="radio" name="preg31" value="p" />
                Moderado
              </label>
              
              <label>
                <input type="radio" name="preg31" value="k" />
                Se mueve lentamente
              </label>
          </fieldset>
          <fieldset>
            <legend>32. Temperamento:</legend>
              <label>
                <input type="radio" name="preg32" value="v" checked required />
                Nervioso / Cambiante
              </label>
            
              <label>
                <input type="radio" name="preg32" value="p" />
                Motivado / Intenso
              </label>
              
              <label>
                <input type="radio" name="preg32" value="k" />
                Conservador
              </label>
          </fieldset>
          <fieldset>
            <legend>33. Emociones positivas:</legend>
              <label>
                <input type="radio" name="preg33" value="v" checked required />
                Adaptabilidad
              </label>
            
              <label>
                <input type="radio" name="preg33" value="p" />
                Valor / Coraje
              </label>
              
              <label>
                <input type="radio" name="preg33" value="k" />
                Amor
              </label>
          </fieldset>
          <fieldset>
            <legend>34. Emociones negativas:</legend>
              <label>
                <input type="radio" name="preg34" value="v" checked required />
                Miedo
              </label>
            
              <label>
                <input type="radio" name="preg34" value="p" />
                Cólera / Enojo intenso
              </label>
              
              <label>
                <input type="radio" name="preg34" value="k" />
                Apego
              </label>
          </fieldset>
          <fieldset>
            <legend>35. Fé:</legend>
              <label>
                <input type="radio" name="preg35" value="v" checked required />
                Variable / Errática
              </label>
            
              <label>
                <input type="radio" name="preg35" value="p" />
                Fuerte / Determinado
              </label>
              
              <label>
                <input type="radio" name="preg35" value="k" />
                Sostenida / Lenta en cambiar
              </label>
          </fieldset>

        </fieldset>
        
        <input type="submit"  value="Enviar"/>
        
      </form> 

      <div class="ContainerGraficos">
        <div class="BoxGraficosTotales">
          <canvas id="graficoTotal"></canvas>
        </div>
        <div class="ContainerGraficosArea">
          <div class="BoxGraficosArea">
            <canvas id="graficoFisica"></canvas>
          </div>
          <div class="BoxGraficosArea">
            <canvas id="graficoAmbiente"></canvas>
          </div>
          <div class="BoxGraficosArea">
            <canvas id="graficoMental"></canvas>
          </div>
          <div class="BoxGraficosArea">
            <canvas id="graficoEmocional"></canvas>
          </div>
        </div>
      </div>
      

  
</body>
</html>